---

---

# http读书笔记

标签（空格分隔）： http

---

## 1.web及网络基础

### 1.1.使用HTTP协议访问web

Web使用一种名为HTTP（HyperText Transfer Protocol，超文本传输协议）的协议作为规范，完成从客户端到服务器等一系列上运作流程。

协议就是规定，简单来说，web是建立在http协议上通信的。

### 1.2.网络基础TCP/IP

通常使用的网络是在TCP/IP协议族的基础上运作的，而http是属于它内部的一个子集。

简而言之，TCP/IP 是互联网相关的各类协议族的总称。

#### 1.2.1.TCP/IP协议族

计算机与网络设备要相互通信，双方就必须基于相同的方法，而我们就把这种规则称为协议。



#### 1.2.2.TCP/IP的分层管理

TCP/IP协议族按层次分为四层：应用层、传输层、网络层和数据链路层。

<table>
    <tr>
        <th>分类</th>
    	<th>功能</th>
        <th>内部</th>
    </tr>
    <tr>
    	<td>应用层</td>
        <td>决定向用户提供应用服务时通信的活动</td>
        <td>HTTP、FTP、DNS</td>
    </tr>
    <tr>
    	<td>传输层</td>
        <td>提供处于网络中的两个台计算机之间的数据传输</td>
        <td>TCP；UDP(User Data Protocol)</td>
    </tr>
    <tr>
    	<td>网络层</td>
        <td>处理网络上流动的数据包，选择传输路线</td>
        <td>
            IP
        </td>
    </tr>
    <tr>
    	<td>链路层（又名网络接口层，数据链路层）</td>
        <td>用来处理链接网络的硬件部分</td>
        <td>网络接口1、2、3……</td>
    </tr>
</table>

#### 1.2.3.TCP/IP通信传输流

发送端从应用层往下走，接收端则从链路层往上走。

传输层接受到应用层的http数据进行分割，然后添加传输层的首部信息，之后每经过一层都会打上首部信息。接受端则相反。这种把数据信息包装起来的做法也叫做封装。

### 1.3.与HTTP关系密切的协议：IP、TCP和DNS

与TCP/IP协议族中与HTTP密不可分的三个协议是：IP、TCP和DNS。

#### 1.3.1.负责传输的IP协议（网络层）

按层次分，IP（Internet Protocol）网络协议位于网络层。

[^IP]: 其实一种协议的名称，不是单纯值ip地址。

IP协议的作用是把各种数据包传送给对方。而要确保传送到对的地方，则需要满足各类条件。其中两个最重要的条件就是Ip地址和MAC地址。

* IP地址：指明了节点呗分配到的地址；IP地址可以变换。

* MAC地址：是指网卡所属的固定地址；MAC地址基本不会更改。

IP地址可以和MAC地址进行配对。



**使用ARP协议凭借MAC地址进行通信**

IP间通讯依赖MAC地址。在非局域网的网络上进行通讯，需要经过多台计算机和网络设备中转才能连接到对方。而在中转时，会利用下一站的中转设备的MAC地址来搜索下一个中转目标。这时就会采用ARP协议（Address Resolution Protocol）。

ARP协议：是一种解析地址的协议，根据通信方的IP地址就可以**反查**出对应的MAC地址。

**没有人能够全面掌握互联网中的传输状况**

类比快递公司送货过程，无法掌握全部细节，但是可以掌握大概路径。

#### 1.3.2.确保可靠性的TCP协议（传输层）

按层次分，TCP位于传输层，提供可靠的字节流服务。

所谓字节流服务（Byte Stream Service）是指，为了方便传输，将大块数据分割成以报文段（segment）为单位的数据包进行管理。

而可靠字节传输是指，能够把数据准确可靠的传给对方。

一言以蔽之，TCP协议为了更容易传送大数据才把数据分割，而且TCP协议能够确认数据最终是否送达对方。

**确保数据能到达目标**

为了确保数据准确无误的到达目标处，TCP协议采用了三次握手策略。

* 发送端首先发送一个带SYN（synchronize）标志的数据给对方。

* 接收端收到后，回传一个带有SYN/ACK标志的数据包以示传达确认信息。

* 最后，发送端在回传一个带ACK标志的数据包，代表“握手”结束。

若握手过程中某个阶段莫名中断，TCP协议会再次以相同的顺序发送相同的数据包。



除了上述三次握手，TCP协议还有其他各种手段来保证通信的可靠性。



#### 1.3.3.负责域名解析的DNS服务（应用层）

DNS（Domain Name System）服务是和HTTP协议一样位于应用层的协议。它提供域名到IP地址之间的解析服务。

简而言之，就是把域名变成ip。

### 1.4.URI和URL

* URI：（Uniform Resource Identifier）同一资源标识符
* URL：（Uniform Resource Locator）同一资源定位符。
